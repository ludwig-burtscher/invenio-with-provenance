401,404c401,411
<     # Note, cannot be done in one line due overloading of boolean
<     # operations permission object.
<     if not permission_factory(record=record).can():
<         from flask_login import current_user
---
>     pm = permission_factory(record=record)
>     
>     from flask_login import current_user
>     with open("/tmp/access.log", "a+") as f:
>         f.write("records\n")
>         f.write(str(vars(current_user)["email"] if "email" in vars(current_user) else "anonymous") + "\n")
>         f.write(str(repr(record)) + "\n")
>         f.write(vars(pm)["action"] + "\n")
>         if "over" in vars(pm):
>             f.write(str(vars(pm)["over"]) + "\n")
>     if not pm.can():
